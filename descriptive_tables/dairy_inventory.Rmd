---
title: "SDVC Final Report Descriptive Tables"
subtitle: "Dairy Cattle Inventory and Milk Production"
author: "Julia Silge"
date: "`r Sys.Date()`"
output: html_document
---

```{r, echo = FALSE, warning = FALSE}
library(knitr)
knitr::opts_chunk$set(cache = TRUE, warning = FALSE, message = FALSE, dpi = 180)
options(width=80, dplyr.width = 150)
```

Before we make some pretty tables, let's read in the data.

```{r}
library(readr)
library(forcats)
library(dplyr)
gpf_ppt <- read_csv("../data/gpf_ppt_merged.csv", 
                    col_types = cols(.default = col_character()))
dim(gpf_ppt)

gpf_ppt <- gpf_ppt %>%
    mutate(round = fct_recode(round,
                              `Jul 2014` = '1.0',
                              `Dec 2014` = '2.0',
                              `Jul 2015` = '3.0',
                              `Dec 2015` = '4.0',
                              `Jul 2016` = '5.0')) %>%
    mutate(household_type = fct_collapse(household_type,
                                         Treatment = c("1", "2", "3"),
                                         Control = c("4", "5", "6")))
```


## Cattle inventory by household, by district

```{r}
gpf_ppt <- gpf_ppt %>%
    mutate(number_cattle_breed_1 = as.numeric(number_cattle_breed_1),
           number_cattle_breed_2 = as.numeric(number_cattle_breed_2))

gpf_ppt %>% 
    filter(round %in% c('Jul 2014', 'Jul 2016')) %>%
    group_by(round, district_gpf, household_type) %>%
    summarise(avgcows = mean(number_cattle_breed_1 + number_cattle_breed_2, na.rm = TRUE),
              mediancows = median(number_cattle_breed_1 + number_cattle_breed_2, na.rm = TRUE)) %>%
    filter(!is.na(mediancows)) %>%
    kable(digits = 0,
          col.names = c("Round of Data Collection", "District", "Treatment/Control",
                        "Number of Cattle per Household (Average)", "Number of Cattle per Household (Median)"),
          caption = "Treatment and Control Groups at the First and Last Data Collection Rounds")

```

```{r}
gpf_ppt %>% 
    filter(!is.na(round) & household_type == "Treatment") %>%
    group_by(round, district_gpf) %>%
    summarise(avgcows = mean(number_cattle_breed_1 + number_cattle_breed_2, na.rm = TRUE),
              mediancows = median(number_cattle_breed_1 + number_cattle_breed_2, na.rm = TRUE)) %>%
    filter(!is.na(mediancows)) %>%
    kable(digits = 0,
          col.names = c("Round of Data Collection", "District", 
                        "Number of Cattle per Household (Average)", "Number of Cattle per Household (Median)"),
          caption = "Treatment Group at All Data Collection Rounds")
```

## Number of local breed cattle per household, per district

```{r}
gpf_ppt %>% 
    filter(round %in% c('Jul 2014', 'Jul 2016')) %>%
    group_by(round, district_gpf, household_type) %>%
    summarise(avgcows = mean(number_cattle_breed_1, na.rm = TRUE),
              mediancows = median(number_cattle_breed_1, na.rm = TRUE)) %>%
    filter(!is.na(mediancows)) %>%
    kable(digits = 0,
          col.names = c("Round of Data Collection", "District", "Treatment/Control", 
                        "Number of Local Breed Cattle per Household (Average)", "Number of Local Breed Cattle per Household (Median)"),
          caption = "Treatment and Control Groups at the First and Last Data Collection Rounds")

```

```{r}
gpf_ppt %>% 
    filter(!is.na(round) & household_type == "Treatment") %>%
    group_by(round, district_gpf) %>%
    summarise(avgcows = mean(number_cattle_breed_1, na.rm = TRUE),
              mediancows = median(number_cattle_breed_1, na.rm = TRUE)) %>%
    filter(!is.na(mediancows)) %>%
    kable(digits = 0,
          col.names = c("Round of Data Collection", "District", 
                        "Number of Cows per Household (Average)", "Number of Cows per Household (Median)"),
          caption = "Treatment Group at All Data Collection Rounds")
```


## Number of cross breed cattle per household, per district

## Percentage of in-milking cows

## Number of births per cow, per district

## Value of local breed and cross breed cows in BDT, by district

## Value of Herd

## Productivity of Herd

## Daily household production of cows in liters, by district, by breed

## Total Income from Milk Sales (Tk.) per month

## Total Milk Consumption in Liters

## Milk Consumption Priorities

## Milk Distribution Patterns – litres

## Milk Distribution Patterns – percentages

## Market Linkage Choices
